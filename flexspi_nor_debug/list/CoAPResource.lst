###############################################################################
#
# IAR ANSI C/C++ Compiler V8.32.3.193/W32 for ARM         10/Jun/2019  13:48:08
# Copyright 1999-2019 IAR Systems AB.
#
#    Cpu mode     =  
#    Endian       =  little
#    Source file  =  
#        C:\Development\smart_washing_machine_3080\csdk\eng\coap_server\server\CoAPResource.c
#    Command line =  
#        -f C:\Users\nxf42695\AppData\Local\Temp\1\EWB14F.tmp
#        (C:\Development\smart_washing_machine_3080\csdk\eng\coap_server\server\CoAPResource.c
#        -D DEBUG -D USE_RTOS -D XIP_EXTERNAL_FLASH=1 -D
#        XIP_BOOT_HEADER_ENABLE=1 -D CPU_MIMXRT1052DVL6B -D FSL_RTOS_FREE_RTOS
#        -D PRINTF_ADVANCED_ENABLE -D
#        "MBEDTLS_CONFIG_FILE=\"ksdk_mbedtls_config.h\"" -lC
#        C:\Development\smart_washing_machine_3080\flexspi_nor_debug\list -lA
#        C:\Development\smart_washing_machine_3080\flexspi_nor_debug\list
#        --diag_suppress Pa082,Pa050 -o
#        C:\Development\smart_washing_machine_3080\flexspi_nor_debug\obj
#        --no_cse --no_unroll --no_inline --no_code_motion --no_tbaa
#        --no_clustering --no_scheduling --debug --endian=little
#        --cpu=Cortex-M7 -e --fpu=VFPv5_d16 --dlib_config "C:\Program Files
#        (x86)\IAR Systems\Embedded Workbench
#        8.2\arm\inc\c\DLib_Config_Normal.h" --preinclude
#        C:\Development\smart_washing_machine_3080/source\app_preinclude.h -I
#        C:\Development\smart_washing_machine_3080/board\ -I
#        C:\Development\smart_washing_machine_3080/source\ -I
#        C:\Development\smart_washing_machine_3080/CMSIS\ -I
#        C:\Development\smart_washing_machine_3080/amazon-freertos/freertos/portable\
#        -I C:\Development\smart_washing_machine_3080/amazon-freertos/include\
#        -I C:\Development\smart_washing_machine_3080/component/lists\ -I
#        C:\Development\smart_washing_machine_3080/component/serial_manager\ -I
#        C:\Development\smart_washing_machine_3080/component/uart\ -I
#        C:\Development\smart_washing_machine_3080/component/kv\ -I
#        C:\Development\smart_washing_machine_3080/component/kv/include\ -I
#        C:\Development\smart_washing_machine_3080/device\ -I
#        C:\Development\smart_washing_machine_3080/doc\ -I
#        C:\Development\smart_washing_machine_3080/drivers\ -I
#        C:\Development\smart_washing_machine_3080/src\ -I
#        C:\Development\smart_washing_machine_3080/startup\ -I
#        C:\Development\smart_washing_machine_3080/utilities\ -I
#        C:\Development\smart_washing_machine_3080/xip\ -I
#        C:\Development\smart_washing_machine_3080\csdk\eng\ -I
#        C:\Development\smart_washing_machine_3080\csdk\eng\atm\ -I
#        C:\Development\smart_washing_machine_3080\csdk\eng\dev_model\ -I
#        C:\Development\smart_washing_machine_3080\csdk\eng\dev_sign\ -I
#        C:\Development\smart_washing_machine_3080\csdk\eng\infra\ -I
#        C:\Development\smart_washing_machine_3080\csdk\eng\mqtt\ -I
#        C:\Development\smart_washing_machine_3080\csdk\eng\wrappers\ -I
#        C:\Development\smart_washing_machine_3080\csdk\eng\wrappers\external_libs\
#        -I C:\Development\smart_washing_machine_3080\csdk\eng\coap_cloud\ -I
#        C:\Development\smart_washing_machine_3080\csdk\eng\coap_server\ -I
#        C:\Development\smart_washing_machine_3080\csdk\eng\coap_server\CoAPPacket\
#        -I
#        C:\Development\smart_washing_machine_3080\csdk\eng\coap_server\server\
#        -I C:\Development\smart_washing_machine_3080\csdk\eng\dev_bind\ -I
#        C:\Development\smart_washing_machine_3080\csdk\eng\dev_bind\impl\ -I
#        C:\Development\smart_washing_machine_3080\csdk\eng\dev_bind\impl\os\
#        -I
#        C:\Development\smart_washing_machine_3080\csdk\eng\dev_bind\impl\awss_reset\
#        -I C:\Development\smart_washing_machine_3080\mbedtls\include\mbedtls\
#        -I C:\Development\smart_washing_machine_3080\mbedtls\include\ -I
#        C:\Development\smart_washing_machine_3080\mbedtls\port\ksdk\ -Om)
#    Locale       =  C
#    List file    =  
#        C:\Development\smart_washing_machine_3080\flexspi_nor_debug\list\CoAPResource.lst
#    Object file  =  
#        C:\Development\smart_washing_machine_3080\flexspi_nor_debug\obj\CoAPResource.o
#
###############################################################################

C:\Development\smart_washing_machine_3080\csdk\eng\coap_server\server\CoAPResource.c
      1          /*
      2           * Copyright (C) 2015-2018 Alibaba Group Holding Limited
      3           */
      4          
      5          
      6          
      7          
      8          #include <string.h>
      9          #include "CoAPExport.h"

   \                                 In section .text, align 2, keep-with-next
   \   static __interwork __softfp void __dlist_add(dlist_t *, dlist_t *, dlist_t *)
   \                     __dlist_add: (+1)
   \        0x0   0x6042             STR      R2,[R0, #+4]
   \        0x2   0x6001             STR      R1,[R0, #+0]
   \        0x4   0x6048             STR      R0,[R1, #+4]
   \        0x6   0x6010             STR      R0,[R2, #+0]
   \        0x8   0x4770             BX       LR               ;; return

   \                                 In section .text, align 2, keep-with-next
   \   static __interwork __softfp void dlist_add_tail(dlist_t *, dlist_t *)
   \                     dlist_add_tail: (+1)
   \        0x0   0x460A             MOV      R2,R1
   \        0x2   0x6811             LDR      R1,[R2, #+0]
   \        0x4   0x....             B.N      __dlist_add

   \                                 In section .text, align 2, keep-with-next
   \   static __interwork __softfp void dlist_del(dlist_t *)
   \                     dlist_del: (+1)
   \        0x0   0x6801             LDR      R1,[R0, #+0]
   \        0x2   0x6840             LDR      R0,[R0, #+4]
   \        0x4   0x6048             STR      R0,[R1, #+4]
   \        0x6   0x6001             STR      R1,[R0, #+0]
   \        0x8   0x4770             BX       LR               ;; return

   \                                 In section .text, align 2, keep-with-next
   \   static __interwork __softfp void INIT_AOS_DLIST_HEAD(dlist_t *)
   \                     INIT_AOS_DLIST_HEAD: (+1)
   \        0x0   0x6040             STR      R0,[R0, #+4]
   \        0x2   0x6000             STR      R0,[R0, #+0]
   \        0x4   0x4770             BX       LR               ;; return

   \                                 In section .text, align 2, keep-with-next
   \   static __interwork __softfp void list_del_init(struct dlist_s *)
   \                     list_del_init: (+1)
   \        0x0   0xB510             PUSH     {R4,LR}
   \        0x2   0x4604             MOV      R4,R0
   \        0x4   0x....'....        BL       dlist_del
   \        0x8   0x4620             MOV      R0,R4
   \        0xA   0xE8BD 0x4010      POP      {R4,LR}
   \        0xE   0x....             B.N      INIT_AOS_DLIST_HEAD
     10          #include "CoAPResource.h"
     11          #include "CoAPPlatform.h"
     12          #include "CoAPInternal.h"
     13          #include "iotx_coap_internal.h"
     14          
     15          #define COAP_PATH_DEFAULT_SUM_LEN (5)
     16          

   \                                 In section .text, align 2, keep-with-next
     17          int CoAPPathMD5_sum(const char *path, int len, char outbuf[], int outlen)
     18          {
   \                     CoAPPathMD5_sum: (+1)
   \        0x0   0xB5F8             PUSH     {R3-R7,LR}
   \        0x2   0xB084             SUB      SP,SP,#+16
   \        0x4   0x4607             MOV      R7,R0
   \        0x6   0x460E             MOV      R6,R1
   \        0x8   0x4615             MOV      R5,R2
   \        0xA   0x461C             MOV      R4,R3
     19              unsigned char md5[16] = {0};
   \        0xC   0x4668             MOV      R0,SP
   \        0xE   0x2110             MOVS     R1,#+16
   \       0x10   0x....'....        BL       __aeabi_memclr4
     20              if (!path || !len || !outbuf || !outlen) {
   \       0x14   0x2F00             CMP      R7,#+0
   \       0x16   0xD005             BEQ.N    ??CoAPPathMD5_sum_0
   \       0x18   0x2E00             CMP      R6,#+0
   \       0x1A   0xD003             BEQ.N    ??CoAPPathMD5_sum_0
   \       0x1C   0x2D00             CMP      R5,#+0
   \       0x1E   0xD001             BEQ.N    ??CoAPPathMD5_sum_0
   \       0x20   0x2C00             CMP      R4,#+0
   \       0x22   0xD102             BNE.N    ??CoAPPathMD5_sum_1
     21                  return -1;
   \                     ??CoAPPathMD5_sum_0: (+1)
   \       0x24   0xF04F 0x30FF      MOV      R0,#-1
   \       0x28   0xE00D             B.N      ??CoAPPathMD5_sum_2
     22              }
     23          
     24              utils_md5((unsigned char *)path, (size_t)len, md5);
   \                     ??CoAPPathMD5_sum_1: (+1)
   \       0x2A   0x466A             MOV      R2,SP
   \       0x2C   0x4631             MOV      R1,R6
   \       0x2E   0x4638             MOV      R0,R7
   \       0x30   0x....'....        BL       utils_md5
     25              memcpy(outbuf, md5, outlen > 16 ? 16 : outlen);
   \       0x34   0x2C11             CMP      R4,#+17
   \       0x36   0xDB00             BLT.N    ??CoAPPathMD5_sum_3
   \       0x38   0x2410             MOVS     R4,#+16
   \                     ??CoAPPathMD5_sum_3: (+1)
   \       0x3A   0x4622             MOV      R2,R4
   \       0x3C   0x4669             MOV      R1,SP
   \       0x3E   0x4628             MOV      R0,R5
   \       0x40   0x....'....        BL       __aeabi_memcpy
     26              return 0;
   \       0x44   0x2000             MOVS     R0,#+0
   \                     ??CoAPPathMD5_sum_2: (+1)
   \       0x46   0xB005             ADD      SP,SP,#+20
   \       0x48   0xBDF0             POP      {R4-R7,PC}       ;; return
     27          }
     28          
     29          

   \                                 In section .text, align 2, keep-with-next
     30          int CoAPResource_init(CoAPContext *context, int res_maxcount)
     31          {
   \                     CoAPResource_init: (+1)
   \        0x0   0xB538             PUSH     {R3-R5,LR}
   \        0x2   0x4604             MOV      R4,R0
   \        0x4   0x460D             MOV      R5,R1
     32              CoAPIntContext *ctx = (CoAPIntContext *)context;
     33          
     34              ctx->resource.list_mutex = HAL_MutexCreate();
   \        0x6   0x....'....        BL       HAL_MutexCreate
   \        0xA   0x6460             STR      R0,[R4, #+68]
     35          
     36              HAL_MutexLock(ctx->resource.list_mutex);
   \        0xC   0x....'....        BL       HAL_MutexLock
     37              INIT_LIST_HEAD(&ctx->resource.list);
   \       0x10   0xF104 0x0048      ADD      R0,R4,#+72
   \       0x14   0x....'....        BL       INIT_AOS_DLIST_HEAD
     38              ctx->resource.count = 0;
   \       0x18   0x2000             MOVS     R0,#+0
   \       0x1A   0xF884 0x0050      STRB     R0,[R4, #+80]
     39              ctx->resource.maxcount = res_maxcount;
   \       0x1E   0xF884 0x5051      STRB     R5,[R4, #+81]
     40              HAL_MutexUnlock(ctx->resource.list_mutex);
   \       0x22   0x6C60             LDR      R0,[R4, #+68]
   \       0x24   0x....'....        BL       HAL_MutexUnlock
     41          
     42              return COAP_SUCCESS;
   \       0x28   0x2000             MOVS     R0,#+0
   \       0x2A   0xBD32             POP      {R1,R4,R5,PC}    ;; return
     43          }
     44          

   \                                 In section .text, align 2, keep-with-next
     45          int CoAPResource_deinit(CoAPContext *context)
     46          {
   \                     CoAPResource_deinit: (+1)
   \        0x0   0xB57F             PUSH     {R0-R6,LR}
   \        0x2   0x4604             MOV      R4,R0
     47              CoAPResource *node = NULL, *next = NULL;
     48              CoAPIntContext *ctx = (CoAPIntContext *)context;
     49              char            tmpbuf[2 * COAP_MAX_PATH_CHECKSUM_LEN + 1] = {0};
   \        0x4   0x4668             MOV      R0,SP
   \        0x6   0x2100             MOVS     R1,#+0
   \        0x8   0x460A             MOV      R2,R1
   \        0xA   0x460B             MOV      R3,R1
   \        0xC   0xE880 0x000E      STM      R0,{R1-R3}
     50          
     51              HAL_MutexLock(ctx->resource.list_mutex);
   \       0x10   0x6C60             LDR      R0,[R4, #+68]
   \       0x12   0x....'....        BL       HAL_MutexLock
     52              list_for_each_entry_safe(node, next, &ctx->resource.list, reslist, CoAPResource) {
   \       0x16   0x6CE0             LDR      R0,[R4, #+76]
   \       0x18   0xF1A0 0x0510      SUB      R5,R0,#+16
   \       0x1C   0x6968             LDR      R0,[R5, #+20]
   \       0x1E   0xF1A0 0x0610      SUB      R6,R0,#+16
   \       0x22   0xE01B             B.N      ??CoAPResource_deinit_0
     53                  if (node->path_type == PATH_FILTER && node->filter_path) {
   \                     ??CoAPResource_deinit_1: (+1)
   \       0x24   0xF895 0x0024      LDRB     R0,[R5, #+36]
   \       0x28   0x2801             CMP      R0,#+1
   \       0x2A   0xD106             BNE.N    ??CoAPResource_deinit_2
   \       0x2C   0x6A28             LDR      R0,[R5, #+32]
   \       0x2E   0x2800             CMP      R0,#+0
   \       0x30   0xD003             BEQ.N    ??CoAPResource_deinit_2
     54                      coap_free(node->filter_path);
   \       0x32   0x....'....        BL       HAL_Free
   \       0x36   0x2000             MOVS     R0,#+0
   \       0x38   0x6228             STR      R0,[R5, #+32]
     55                  }
     56                  list_del_init(&node->reslist);
   \                     ??CoAPResource_deinit_2: (+1)
   \       0x3A   0xF105 0x0010      ADD      R0,R5,#+16
   \       0x3E   0x....'....        BL       list_del_init
     57                  infra_hex2str((unsigned char *)node->path, COAP_MAX_PATH_CHECKSUM_LEN, tmpbuf);
   \       0x42   0x466A             MOV      R2,SP
   \       0x44   0x2105             MOVS     R1,#+5
   \       0x46   0xF105 0x0018      ADD      R0,R5,#+24
   \       0x4A   0x....'....        BL       infra_hex2str
     58                  COAP_DEBUG("Release the resource %s", tmpbuf);
     59                  coap_free(node);
   \       0x4E   0x4628             MOV      R0,R5
   \       0x50   0x....'....        BL       HAL_Free
     60              }
   \       0x54   0x4635             MOV      R5,R6
   \       0x56   0x6970             LDR      R0,[R6, #+20]
   \       0x58   0xF1A0 0x0610      SUB      R6,R0,#+16
   \                     ??CoAPResource_deinit_0: (+1)
   \       0x5C   0xF105 0x0010      ADD      R0,R5,#+16
   \       0x60   0xF104 0x0148      ADD      R1,R4,#+72
   \       0x64   0x4288             CMP      R0,R1
   \       0x66   0xD1DD             BNE.N    ??CoAPResource_deinit_1
     61              ctx->resource.count = 0;
   \       0x68   0x2000             MOVS     R0,#+0
   \       0x6A   0xF884 0x0050      STRB     R0,[R4, #+80]
     62              ctx->resource.maxcount = 0;
   \       0x6E   0xF884 0x0051      STRB     R0,[R4, #+81]
     63              HAL_MutexUnlock(ctx->resource.list_mutex);
   \       0x72   0x6C60             LDR      R0,[R4, #+68]
   \       0x74   0x....'....        BL       HAL_MutexUnlock
     64          
     65              HAL_MutexDestroy(ctx->resource.list_mutex);
   \       0x78   0x6C60             LDR      R0,[R4, #+68]
   \       0x7A   0x....'....        BL       HAL_MutexDestroy
     66              ctx->resource.list_mutex = NULL;
   \       0x7E   0x2000             MOVS     R0,#+0
   \       0x80   0x6460             STR      R0,[R4, #+68]
     67              return COAP_SUCCESS;
   \       0x82   0xB004             ADD      SP,SP,#+16
   \       0x84   0xBD70             POP      {R4-R6,PC}       ;; return
     68          }
     69          

   \                                 In section .text, align 2, keep-with-next
     70          CoAPResource *CoAPResource_create(const char *path, path_type_t path_type, unsigned short permission,
     71                                            unsigned int ctype, unsigned int maxage,
     72                                            CoAPRecvMsgHandler callback)
     73          {
   \                     CoAPResource_create: (+1)
   \        0x0   0xE92D 0x41F0      PUSH     {R4-R8,LR}
   \        0x4   0x4605             MOV      R5,R0
   \        0x6   0x4688             MOV      R8,R1
   \        0x8   0x4616             MOV      R6,R2
   \        0xA   0x461F             MOV      R7,R3
     74              CoAPResource *resource = NULL;
     75          
     76              if (NULL == path) {
   \        0xC   0x2D00             CMP      R5,#+0
   \        0xE   0xD008             BEQ.N    ??CoAPResource_create_0
     77                  return NULL;
     78              }
     79          
     80              if (strlen(path) >= COAP_MSG_MAX_PATH_LEN) {
   \       0x10   0x....'....        BL       strlen
   \       0x14   0x2880             CMP      R0,#+128
   \       0x16   0xD204             BCS.N    ??CoAPResource_create_0
     81                  return NULL;
     82              }
     83          
     84              resource = coap_malloc(sizeof(CoAPResource));
   \       0x18   0x2028             MOVS     R0,#+40
   \       0x1A   0x....'....        BL       HAL_Malloc
   \       0x1E   0x0004             MOVS     R4,R0
     85              if (NULL == resource) {
   \       0x20   0xD101             BNE.N    ??CoAPResource_create_1
     86                  return NULL;
   \                     ??CoAPResource_create_0: (+1)
   \       0x22   0x2000             MOVS     R0,#+0
   \       0x24   0xE03C             B.N      ??CoAPResource_create_2
     87              }
     88          
     89              memset(resource, 0x00, sizeof(CoAPResource));
   \                     ??CoAPResource_create_1: (+1)
   \       0x26   0x2200             MOVS     R2,#+0
   \       0x28   0x2128             MOVS     R1,#+40
   \       0x2A   0x....'....        BL       __aeabi_memset4
     90              if (path_type == PATH_NORMAL) {
   \       0x2E   0xF1B8 0x0F00      CMP      R8,#+0
   \       0x32   0xD10D             BNE.N    ??CoAPResource_create_3
     91                  resource->path_type = PATH_NORMAL;
   \       0x34   0x2000             MOVS     R0,#+0
   \       0x36   0xF884 0x0024      STRB     R0,[R4, #+36]
     92                  CoAPPathMD5_sum(path, strlen(path), resource->path, COAP_PATH_DEFAULT_SUM_LEN);
   \       0x3A   0x4628             MOV      R0,R5
   \       0x3C   0x....'....        BL       strlen
   \       0x40   0x2305             MOVS     R3,#+5
   \       0x42   0xF104 0x0218      ADD      R2,R4,#+24
   \       0x46   0x4601             MOV      R1,R0
   \       0x48   0x4628             MOV      R0,R5
   \       0x4A   0x....'....        BL       CoAPPathMD5_sum
   \       0x4E   0xE020             B.N      ??CoAPResource_create_4
     93              } else {
     94                  int len = strlen(path) + 1;
   \                     ??CoAPResource_create_3: (+1)
   \       0x50   0x4628             MOV      R0,R5
   \       0x52   0x....'....        BL       strlen
   \       0x56   0x4680             MOV      R8,R0
   \       0x58   0xF108 0x0801      ADD      R8,R8,#+1
     95                  resource->filter_path = coap_malloc(len);
   \       0x5C   0x4640             MOV      R0,R8
   \       0x5E   0x....'....        BL       HAL_Malloc
   \       0x62   0x6220             STR      R0,[R4, #+32]
     96                  if (NULL == resource->filter_path) {
   \       0x64   0x2800             CMP      R0,#+0
   \       0x66   0xD104             BNE.N    ??CoAPResource_create_5
     97                      coap_free(resource);
   \       0x68   0x4620             MOV      R0,R4
   \       0x6A   0x....'....        BL       HAL_Free
     98                      return NULL;
   \       0x6E   0x2000             MOVS     R0,#+0
   \       0x70   0xE016             B.N      ??CoAPResource_create_2
     99                  }
    100                  resource->path_type = PATH_FILTER;
   \                     ??CoAPResource_create_5: (+1)
   \       0x72   0x2001             MOVS     R0,#+1
   \       0x74   0xF884 0x0024      STRB     R0,[R4, #+36]
    101                  memset(resource->filter_path, 0, len);
   \       0x78   0x2200             MOVS     R2,#+0
   \       0x7A   0x4641             MOV      R1,R8
   \       0x7C   0x6A20             LDR      R0,[R4, #+32]
   \       0x7E   0x....'....        BL       __aeabi_memset
    102                  strncpy(resource->filter_path, path, strlen(path));
   \       0x82   0x4628             MOV      R0,R5
   \       0x84   0x....'....        BL       strlen
   \       0x88   0x4602             MOV      R2,R0
   \       0x8A   0x4629             MOV      R1,R5
   \       0x8C   0x6A20             LDR      R0,[R4, #+32]
   \       0x8E   0x....'....        BL       strncpy
   \                     ??CoAPResource_create_4: (+1)
   \       0x92   0x9907             LDR      R1,[SP, #+28]
   \       0x94   0x9806             LDR      R0,[SP, #+24]
    103          
    104              }
    105              resource->callback = callback;
   \       0x96   0x6061             STR      R1,[R4, #+4]
    106              resource->ctype = ctype;
   \       0x98   0x60A7             STR      R7,[R4, #+8]
    107              resource->maxage = maxage;
   \       0x9A   0x60E0             STR      R0,[R4, #+12]
    108              resource->permission = permission;
   \       0x9C   0x8026             STRH     R6,[R4, #+0]
    109          
    110              return resource;
   \       0x9E   0x4620             MOV      R0,R4
   \                     ??CoAPResource_create_2: (+1)
   \       0xA0   0xE8BD 0x81F0      POP      {R4-R8,PC}       ;; return
    111          }
    112          

   \                                 In section .text, align 2, keep-with-next
    113          int CoAPResource_register(CoAPContext *context, const char *path,
    114                                    unsigned short permission, unsigned int ctype,
    115                                    unsigned int maxage, CoAPRecvMsgHandler callback)
    116          {
   \                     CoAPResource_register: (+1)
   \        0x0   0xE92D 0x4FF8      PUSH     {R3-R11,LR}
   \        0x4   0xB086             SUB      SP,SP,#+24
   \        0x6   0x4604             MOV      R4,R0
   \        0x8   0x4689             MOV      R9,R1
   \        0xA   0x4616             MOV      R6,R2
   \        0xC   0x461F             MOV      R7,R3
    117              int exist = 0;
   \        0xE   0x2500             MOVS     R5,#+0
    118              char path_calc[COAP_PATH_DEFAULT_SUM_LEN] = {0};
   \       0x10   0xA803             ADD      R0,SP,#+12
   \       0x12   0x4629             MOV      R1,R5
   \       0x14   0x460A             MOV      R2,R1
   \       0x16   0xE9C0 0x1200      STRD     R1,R2,[R0, #+0]
    119              CoAPResource *node = NULL, *newnode = NULL;
    120              CoAPIntContext *ctx = (CoAPIntContext *)context;
    121              path_type_t type = PATH_NORMAL;
   \       0x1A   0x468A             MOV      R10,R1
    122          
    123              if (context == NULL) {
   \       0x1C   0x2C00             CMP      R4,#+0
   \       0x1E   0xD102             BNE.N    ??CoAPResource_register_0
    124                  return FAIL_RETURN;
   \       0x20   0xF04F 0x30FF      MOV      R0,#-1
   \       0x24   0xE067             B.N      ??CoAPResource_register_1
    125              }
    126          
    127              HAL_MutexLock(ctx->resource.list_mutex);
   \                     ??CoAPResource_register_0: (+1)
   \       0x26   0x6C60             LDR      R0,[R4, #+68]
   \       0x28   0x....'....        BL       HAL_MutexLock
    128              if (ctx->resource.count >= ctx->resource.maxcount) {
   \       0x2C   0xF894 0x0050      LDRB     R0,[R4, #+80]
   \       0x30   0xF894 0x1051      LDRB     R1,[R4, #+81]
   \       0x34   0x4288             CMP      R0,R1
   \       0x36   0xD305             BCC.N    ??CoAPResource_register_2
    129                  HAL_MutexUnlock(ctx->resource.list_mutex);
   \       0x38   0x6C60             LDR      R0,[R4, #+68]
   \       0x3A   0x....'....        BL       HAL_MutexUnlock
    130                  COAP_INFO("The resource count exceeds limit, cur %d, max %d",
    131                            ctx->resource.count,  ctx->resource.maxcount);
    132                  return COAP_ERROR_DATA_SIZE;
   \       0x3E   0xF240 0x1005      MOVW     R0,#+261
   \       0x42   0xE058             B.N      ??CoAPResource_register_1
    133              }
    134          
    135              if (strstr(path, "/#") != NULL) {
   \                     ??CoAPResource_register_2: (+1)
   \       0x44   0x....             ADR.N    R1,??DataTable1  ;; 0x2F, 0x23, 0x00, 0x00
   \       0x46   0x4648             MOV      R0,R9
   \       0x48   0x....'....        BL       strstr
   \       0x4C   0x2800             CMP      R0,#+0
   \       0x4E   0xD002             BEQ.N    ??CoAPResource_register_3
    136                  type = PATH_FILTER;
   \       0x50   0xF04F 0x0A01      MOV      R10,#+1
   \       0x54   0xE008             B.N      ??CoAPResource_register_4
    137              } else {
    138                  CoAPPathMD5_sum(path, strlen(path), path_calc, COAP_PATH_DEFAULT_SUM_LEN);
   \                     ??CoAPResource_register_3: (+1)
   \       0x56   0x4648             MOV      R0,R9
   \       0x58   0x....'....        BL       strlen
   \       0x5C   0x2305             MOVS     R3,#+5
   \       0x5E   0xAA03             ADD      R2,SP,#+12
   \       0x60   0x4601             MOV      R1,R0
   \       0x62   0x4648             MOV      R0,R9
   \       0x64   0x....'....        BL       CoAPPathMD5_sum
    139              }
    140          
    141              list_for_each_entry(node, &ctx->resource.list, reslist, CoAPResource) {
   \                     ??CoAPResource_register_4: (+1)
   \       0x68   0x6CE0             LDR      R0,[R4, #+76]
   \       0x6A   0x3810             SUBS     R0,R0,#+16
   \       0x6C   0xF8AD 0x6008      STRH     R6,[SP, #+8]
   \       0x70   0x9705             STR      R7,[SP, #+20]
   \       0x72   0x9F10             LDR      R7,[SP, #+64]
   \       0x74   0xF8DD 0x8044      LDR      R8,[SP, #+68]
   \       0x78   0x4626             MOV      R6,R4
   \       0x7A   0x4654             MOV      R4,R10
   \       0x7C   0x4682             MOV      R10,R0
   \                     ??CoAPResource_register_5: (+1)
   \       0x7E   0xF10A 0x0010      ADD      R0,R10,#+16
   \       0x82   0xF106 0x0148      ADD      R1,R6,#+72
   \       0x86   0x4288             CMP      R0,R1
   \       0x88   0xD019             BEQ.N    ??CoAPResource_register_6
    142                  if (type == PATH_NORMAL && node->path_type == PATH_NORMAL) {
   \       0x8A   0x2C00             CMP      R4,#+0
   \       0x8C   0xD136             BNE.N    ??CoAPResource_register_7
   \       0x8E   0xF89A 0x0024      LDRB     R0,[R10, #+36]
   \       0x92   0x2800             CMP      R0,#+0
   \       0x94   0xD132             BNE.N    ??CoAPResource_register_7
    143                      if (0 == memcmp(path_calc, node->path, COAP_PATH_DEFAULT_SUM_LEN)) {
   \       0x96   0x2205             MOVS     R2,#+5
   \       0x98   0xF10A 0x0118      ADD      R1,R10,#+24
   \       0x9C   0xA803             ADD      R0,SP,#+12
   \       0x9E   0x....'....        BL       memcmp
   \       0xA2   0x2800             CMP      R0,#+0
   \       0xA4   0xD145             BNE.N    ??CoAPResource_register_8
    144                          /*Alread exist, re-write it*/
    145                          COAP_INFO("CoAPResource_register:Alread exist");
    146                          exist = 1;
    147                          node->callback = callback;
    148                          node->ctype = ctype;
    149                          node->maxage = maxage;
    150                          node->permission = permission;
    151                          COAP_INFO("The resource %s already exist, re-write it", path);
    152                          break;
    153                      }
    154                  } else if (type == PATH_FILTER && node->path_type == PATH_FILTER) {
    155                      if (strlen(path) == strlen(node->filter_path) && 0 == strncpy((char *)path, node->filter_path, strlen(path))) {
    156                          /*Alread exist, re-write it*/
    157                          COAP_INFO("CoAPResource_register:Alread exist");
    158                          exist = 1;
   \                     ??CoAPResource_register_9: (+1)
   \       0xA6   0x2501             MOVS     R5,#+1
    159                          node->callback = callback;
   \       0xA8   0xF8CA 0x8004      STR      R8,[R10, #+4]
    160                          node->ctype = ctype;
   \       0xAC   0x9805             LDR      R0,[SP, #+20]
   \       0xAE   0xF8CA 0x0008      STR      R0,[R10, #+8]
    161                          node->maxage = maxage;
   \       0xB2   0xF8CA 0x700C      STR      R7,[R10, #+12]
    162                          node->permission = permission;
   \       0xB6   0xF8BD 0x0008      LDRH     R0,[SP, #+8]
   \       0xBA   0xF8AA 0x0000      STRH     R0,[R10, #+0]
    163                          COAP_INFO("The resource %s already exist, re-write it", path);
    164                          break;
    165                      }
    166                  }
    167              }
    168          
    169              if (0 == exist) {
   \                     ??CoAPResource_register_6: (+1)
   \       0xBE   0x2D00             CMP      R5,#+0
   \       0xC0   0xD115             BNE.N    ??CoAPResource_register_10
    170                  newnode = CoAPResource_create(path, type, permission, ctype, maxage, callback);
   \       0xC2   0xF8CD 0x8004      STR      R8,[SP, #+4]
   \       0xC6   0x9700             STR      R7,[SP, #+0]
   \       0xC8   0x9B05             LDR      R3,[SP, #+20]
   \       0xCA   0xF8BD 0x2008      LDRH     R2,[SP, #+8]
   \       0xCE   0x4621             MOV      R1,R4
   \       0xD0   0x4648             MOV      R0,R9
   \       0xD2   0x....'....        BL       CoAPResource_create
    171                  if (NULL != newnode) {
   \       0xD6   0x2800             CMP      R0,#+0
   \       0xD8   0xD009             BEQ.N    ??CoAPResource_register_10
    172                      COAP_DEBUG("CoAPResource_register, context:%p, new node", ctx);
    173                      list_add_tail(&newnode->reslist, &ctx->resource.list);
   \       0xDA   0xF106 0x0148      ADD      R1,R6,#+72
   \       0xDE   0x3010             ADDS     R0,R0,#+16
   \       0xE0   0x....'....        BL       dlist_add_tail
    174                      ctx->resource.count++;
   \       0xE4   0xF896 0x0050      LDRB     R0,[R6, #+80]
   \       0xE8   0x1C40             ADDS     R0,R0,#+1
   \       0xEA   0xF886 0x0050      STRB     R0,[R6, #+80]
    175                      COAP_DEBUG("Register new resource %s success, count: %d", path, ctx->resource.count);
    176                  } else {
    177                      COAP_ERR("New resource create failed");
    178                  }
    179              }
    180          
    181              HAL_MutexUnlock(ctx->resource.list_mutex);
   \                     ??CoAPResource_register_10: (+1)
   \       0xEE   0x6C70             LDR      R0,[R6, #+68]
   \       0xF0   0x....'....        BL       HAL_MutexUnlock
    182          
    183              return COAP_SUCCESS;
   \       0xF4   0x2000             MOVS     R0,#+0
   \                     ??CoAPResource_register_1: (+1)
   \       0xF6   0xB007             ADD      SP,SP,#+28
   \       0xF8   0xE8BD 0x8FF0      POP      {R4-R11,PC}      ;; return
   \                     ??CoAPResource_register_7: (+1)
   \       0xFC   0x2C01             CMP      R4,#+1
   \       0xFE   0xD118             BNE.N    ??CoAPResource_register_8
   \      0x100   0xF89A 0x0024      LDRB     R0,[R10, #+36]
   \      0x104   0x2801             CMP      R0,#+1
   \      0x106   0xD114             BNE.N    ??CoAPResource_register_8
   \      0x108   0x4648             MOV      R0,R9
   \      0x10A   0x....'....        BL       strlen
   \      0x10E   0x4683             MOV      R11,R0
   \      0x110   0xF8DA 0x0020      LDR      R0,[R10, #+32]
   \      0x114   0x....'....        BL       strlen
   \      0x118   0x4583             CMP      R11,R0
   \      0x11A   0xD10A             BNE.N    ??CoAPResource_register_8
   \      0x11C   0x4648             MOV      R0,R9
   \      0x11E   0x....'....        BL       strlen
   \      0x122   0x4602             MOV      R2,R0
   \      0x124   0xF8DA 0x1020      LDR      R1,[R10, #+32]
   \      0x128   0x4648             MOV      R0,R9
   \      0x12A   0x....'....        BL       strncpy
   \      0x12E   0x2800             CMP      R0,#+0
   \      0x130   0xD0B9             BEQ.N    ??CoAPResource_register_9
   \                     ??CoAPResource_register_8: (+1)
   \      0x132   0xF8DA 0x0014      LDR      R0,[R10, #+20]
   \      0x136   0xF1A0 0x0A10      SUB      R10,R0,#+16
   \      0x13A   0xE7A0             B.N      ??CoAPResource_register_5
    184          }
    185          

   \                                 In section .text, align 2, keep-with-next
    186          int CoAPResource_unregister(CoAPContext *context, const char *path)
    187          {
    188              COAP_DEBUG("This feature isn't supported");
    189              return COAP_ERROR_UNSUPPORTED;
   \                     CoAPResource_unregister: (+1)
   \        0x0   0xF240 0x100D      MOVW     R0,#+269
   \        0x4   0x4770             BX       LR               ;; return
    190          }
    191          

   \                                 In section .text, align 2, keep-with-next
    192          CoAPResource *CoAPResourceByPath_get(CoAPContext *context, const char *path)
    193          {
   \                     CoAPResourceByPath_get: (+1)
   \        0x0   0xB57C             PUSH     {R2-R6,LR}
   \        0x2   0x4604             MOV      R4,R0
   \        0x4   0x460D             MOV      R5,R1
    194              char path_calc[COAP_PATH_DEFAULT_SUM_LEN] = {0};
   \        0x6   0x4668             MOV      R0,SP
   \        0x8   0x2100             MOVS     R1,#+0
   \        0xA   0x460A             MOV      R2,R1
   \        0xC   0xE9C0 0x1200      STRD     R1,R2,[R0, #+0]
    195              CoAPResource *node = NULL;
    196              CoAPIntContext *ctx = (CoAPIntContext *)context;
    197          
    198              if (NULL == context || NULL == path) {
   \       0x10   0x2C00             CMP      R4,#+0
   \       0x12   0xD001             BEQ.N    ??CoAPResourceByPath_get_0
   \       0x14   0x2D00             CMP      R5,#+0
   \       0x16   0xD101             BNE.N    ??CoAPResourceByPath_get_1
    199                  COAP_INFO("%s\n", "NULL == context || NULL == path");
    200                  return NULL;
   \                     ??CoAPResourceByPath_get_0: (+1)
   \       0x18   0x4608             MOV      R0,R1
   \       0x1A   0xBD76             POP      {R1,R2,R4-R6,PC}
    201              }
    202              COAP_FLOW("CoAPResourceByPath_get, context:%p\n", ctx);
    203          
    204              CoAPPathMD5_sum(path, strlen(path), path_calc, COAP_PATH_DEFAULT_SUM_LEN);
   \                     ??CoAPResourceByPath_get_1: (+1)
   \       0x1C   0x4628             MOV      R0,R5
   \       0x1E   0x....'....        BL       strlen
   \       0x22   0x2305             MOVS     R3,#+5
   \       0x24   0x466A             MOV      R2,SP
   \       0x26   0x4601             MOV      R1,R0
   \       0x28   0x4628             MOV      R0,R5
   \       0x2A   0x....'....        BL       CoAPPathMD5_sum
    205          
    206              HAL_MutexLock(ctx->resource.list_mutex);
   \       0x2E   0x6C60             LDR      R0,[R4, #+68]
   \       0x30   0x....'....        BL       HAL_MutexLock
    207              list_for_each_entry(node, &ctx->resource.list, reslist, CoAPResource) {
   \       0x34   0x6CE0             LDR      R0,[R4, #+76]
   \       0x36   0xF1A0 0x0610      SUB      R6,R0,#+16
   \                     ??CoAPResourceByPath_get_2: (+1)
   \       0x3A   0xF106 0x0010      ADD      R0,R6,#+16
   \       0x3E   0xF104 0x0148      ADD      R1,R4,#+72
   \       0x42   0x4288             CMP      R0,R1
   \       0x44   0xD01F             BEQ.N    ??CoAPResourceByPath_get_3
    208                  if (0 == memcmp(path_calc, node->path, COAP_PATH_DEFAULT_SUM_LEN)) {
   \       0x46   0x2205             MOVS     R2,#+5
   \       0x48   0xF106 0x0118      ADD      R1,R6,#+24
   \       0x4C   0x4668             MOV      R0,SP
   \       0x4E   0x....'....        BL       memcmp
   \       0x52   0x2800             CMP      R0,#+0
   \       0x54   0xD01C             BEQ.N    ??CoAPResourceByPath_get_4
    209                      HAL_MutexUnlock(ctx->resource.list_mutex);
    210                      COAP_DEBUG("Found the resource: %s", path);
    211                      return node;
    212                  }
    213                  if (node->path_type == PATH_FILTER && strlen(node->filter_path) > 0
    214                      && 0 == strncmp(path, node->filter_path, strlen(node->filter_path) - 1)) {
   \       0x56   0xF896 0x0024      LDRB     R0,[R6, #+36]
   \       0x5A   0x2801             CMP      R0,#+1
   \       0x5C   0xD10F             BNE.N    ??CoAPResourceByPath_get_5
   \       0x5E   0x6A30             LDR      R0,[R6, #+32]
   \       0x60   0x....'....        BL       strlen
   \       0x64   0x2800             CMP      R0,#+0
   \       0x66   0xD00A             BEQ.N    ??CoAPResourceByPath_get_5
   \       0x68   0x6A30             LDR      R0,[R6, #+32]
   \       0x6A   0x....'....        BL       strlen
   \       0x6E   0x4602             MOV      R2,R0
   \       0x70   0x1E52             SUBS     R2,R2,#+1
   \       0x72   0x6A31             LDR      R1,[R6, #+32]
   \       0x74   0x4628             MOV      R0,R5
   \       0x76   0x....'....        BL       strncmp
   \       0x7A   0x2800             CMP      R0,#+0
   \       0x7C   0xD008             BEQ.N    ??CoAPResourceByPath_get_4
   \                     ??CoAPResourceByPath_get_5: (+1)
   \       0x7E   0x6970             LDR      R0,[R6, #+20]
   \       0x80   0xF1A0 0x0610      SUB      R6,R0,#+16
   \       0x84   0xE7D9             B.N      ??CoAPResourceByPath_get_2
    215                      HAL_MutexUnlock(ctx->resource.list_mutex);
    216                      COAP_DEBUG("Found the resource: %s", path);
    217                      return node;
    218                  }
    219          
    220              }
    221              HAL_MutexUnlock(ctx->resource.list_mutex);
   \                     ??CoAPResourceByPath_get_3: (+1)
   \       0x86   0x6C60             LDR      R0,[R4, #+68]
   \       0x88   0x....'....        BL       HAL_MutexUnlock
    222          
    223              return NULL;
   \       0x8C   0x2000             MOVS     R0,#+0
   \       0x8E   0xBD76             POP      {R1,R2,R4-R6,PC}  ;; return
   \                     ??CoAPResourceByPath_get_4: (+1)
   \       0x90   0x6C60             LDR      R0,[R4, #+68]
   \       0x92   0x....'....        BL       HAL_MutexUnlock
   \       0x96   0x4630             MOV      R0,R6
   \       0x98   0xBD76             POP      {R1,R2,R4-R6,PC}
    224          }

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1:
   \        0x0   0x2F 0x23          DC8      0x2F, 0x23, 0x00, 0x00
   \              0x00 0x00    

   \                                 In section .rodata, align 4
   \        0x0   0x00 0x00          DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              0x00 0x00    
   \              0x00 0x00    
   \              0x00 0x00    
   \              0x00 0x00    
   \              0x00 0x00    
   \              0x00 0x00    
   \              0x00 0x00    

   \                                 In section .rodata, align 4
   \        0x0   0x00 0x00          DC8 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
   \              0x00 0x00    
   \              0x00 0x00    
   \              0x00 0x00    
   \              0x00 0x00    
   \              0x00 0x00    

   \                                 In section .rodata, align 4
   \        0x0   0x00 0x00          DC8 0, 0, 0, 0, 0, 0, 0, 0
   \              0x00 0x00    
   \              0x00 0x00    
   \              0x00 0x00    

   \                                 In section .rodata, align 4
   \        0x0   0x2F 0x23          DC8 "/#"
   \              0x00         
   \        0x3   0x00               DC8 0

   \                                 In section .rodata, align 4
   \        0x0   0x00 0x00          DC8 0, 0, 0, 0, 0, 0, 0, 0
   \              0x00 0x00    
   \              0x00 0x00    
   \              0x00 0x00    

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
      40   CoAPPathMD5_sum
        40   -> __aeabi_memclr4
        40   -> __aeabi_memcpy
        40   -> utils_md5
      24   CoAPResourceByPath_get
        24   -> CoAPPathMD5_sum
        24   -> HAL_MutexLock
        24   -> HAL_MutexUnlock
        24   -> memcmp
        24   -> strlen
        24   -> strncmp
      24   CoAPResource_create
        24   -> CoAPPathMD5_sum
        24   -> HAL_Free
        24   -> HAL_Malloc
        24   -> __aeabi_memset
        24   -> __aeabi_memset4
        24   -> strlen
        24   -> strncpy
      32   CoAPResource_deinit
        32   -> HAL_Free
        32   -> HAL_MutexDestroy
        32   -> HAL_MutexLock
        32   -> HAL_MutexUnlock
        32   -> infra_hex2str
        32   -> list_del_init
      16   CoAPResource_init
        16   -> HAL_MutexCreate
        16   -> HAL_MutexLock
        16   -> HAL_MutexUnlock
        16   -> INIT_AOS_DLIST_HEAD
      64   CoAPResource_register
        64   -> CoAPPathMD5_sum
        64   -> CoAPResource_create
        64   -> HAL_MutexLock
        64   -> HAL_MutexUnlock
        64   -> dlist_add_tail
        64   -> memcmp
        64   -> strlen
        64   -> strncpy
        64   -> strstr
       0   CoAPResource_unregister
       0   INIT_AOS_DLIST_HEAD
       0   __dlist_add
       0   dlist_add_tail
         0   -> __dlist_add
       0   dlist_del
       8   list_del_init
         0   -> INIT_AOS_DLIST_HEAD
         8   -> dlist_del


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable1
      16  ?_0
      12  ?_1
       8  ?_2
       4  ?_3
       8  ?_4
      74  CoAPPathMD5_sum
     154  CoAPResourceByPath_get
     164  CoAPResource_create
     134  CoAPResource_deinit
      44  CoAPResource_init
     316  CoAPResource_register
       6  CoAPResource_unregister
       6  INIT_AOS_DLIST_HEAD
      10  __dlist_add
       6  dlist_add_tail
      10  dlist_del
      16  list_del_init

 
  48 bytes in section .rodata
 944 bytes in section .text
 
 944 bytes of CODE  memory
  48 bytes of CONST memory

Errors: none
Warnings: none
